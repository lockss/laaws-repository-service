language: java
sudo: required
services:
- docker
jdk:
- openjdk8
branches:
  only:
  - master
  - develop
os:
- linux
install: true
script: mvn -q clean install
before_deploy:
- bash ./ci/before_deploy.sh
deploy:
  provider: script
  script: bash ./ci/deploy.sh
  on:
    branch: master
    tags: true
cache:
  directories:
  - "$HOME/.m2"
notifications:
  email: dev-notify@lockss.org
before_install:
- openssl aes-256-cbc -K $encrypted_31196aec05d0_key -iv $encrypted_31196aec05d0_iv
  -in ci/codesigning.asc.enc -out ci/codesigning.asc -d
env:
  global:
  - secure: LquHrz9GolIEZibUwC93aeLVbrRF8Y9uNiNBxWc6/ICArWvoDQW4O/C5q+aWLs2n0W0jZj8QvEKQI9fnDJQHFaA4+ffFcw/Ff4aAs8IAP+ujbecGah1mfRLfgCRdzIVQY60K3Xrbqul+Thl/OPiaZ1i9P8jh8De+Xeh68Qm6ICBGZeI7vCARF140AYxHfrGM3bbiTN7MbYlVxr+p1AaiOYMQnvU7v138JDK8NcAWR6pgFwTpSE5nfBG7NklnfiNph/sDQoI09hr7eQrfmrvldbTB47ZzVQa7692RG1ns0tyo7S0qBlpAciw5ONl7S/yd8UZSXmSIfUOzAGBgwEAWQ18ZYeYBWp8Rr0Fj0A3qUN2NzDPZJY3MW26ar2B7m0FBZBr9mI3JoZt6LvDDgjB93jooncn88mw1ISc8EAlR20SQQX2RTY18IDIBt6Nl2QhgGFwg/JjYHo5FVeXV24A9WLwmSC+oWFQYIvuIeUvjXZUOvSE8gqlNZ8rYPpSIzVFmEg/m9dsPQ8wWPbBNu8XmuYsI08t+k/Ai62FjDCVjOtMWsi+wzKfMLQswZikZchNQ4xzxiRWoF+GZ3ebeMJDQZdbiyQVJDdQRKkm3uRaxdqRiRYgTRVtECD7mysSjicT6x7dJKrvG7FpDmyp0PogE2VfT2hIdbv6BMswulNuPQWo=
  - secure: TJa1/pnYpw583jq64vyflUVirg/13TT/bnfGIO+O9kprZ4zUczDvAiNTKOmJBHT4J+ewfIp7dXcctML1k39E8+41gotG7E24NcsrygQu4rVTPRBzJELi9ufPP3Ea25w2DyPQmnEXHDqWLW3RHWXuNtLnR8G/B13YNPrCMVBfEqvoj3W/yFVJX57SBISWXUqoY3pn60ki0eNOc3cOd0zSJyWVMVvDvzUbovGik7ldAZFO3b9T6DFFdbkRa1aGMW/HGdFTJgxTmCSUapjOjNVmUfeWhXyK/YhAOHjOfURCId08UqzWQ2gLSgqIhDdDJcwKI0Ou3eG9jdSh8AfREVImX+1DiYh954Xr9Gjjqkae5uWmhFPMy1+cLvWnwT5Yd98OixSRWe96lPP1HkEp4gyTITMrhmCj7cKVbxs+ZivHv0ngFUecy8+tFYZKfiepd9ePiQfKPWkhajck4Vyf2sMX6EjyPRNwbnuuDqR1nTglszq66negX/V3vDH2sapIuVOqKVPgwBJVR44Er/LlgUuZSn6k99jilpaKF5ka3LppT7U3AZFl69QMtR+2ms+5XW/xqKLnwdYs7ni07gvnBnkOFVticMnWQaYZQiYm3jkPl+Du2NvqteA1P2/8eKSP1rZwHxin5iQeEwnJXySV2LwAhLNEVH/X6QJen8LWDKviCpw=
  - secure: XIRxADazOMJ+cg+y510C9SpDf0yLbO9/Wlm+3+rmvpPSoZkar4bnCjLqbUSJ8hpNlQYoC7PLkShrtmG0RUbq3YUjCNTNot8eQODpQXCO77bOwR9UfcojNC9FJr7HZovYwLo9W5WGBLBeP0CkN8QV3RkigZFUUMjfGIARBqlGzf33wZ92LwfNhR/wvhVOCtBL6q5+GnE+O4zB/c25AvZnk1kLy7KzbqQ54i85vdwh0+ui6G1v/vjXYjLiGHaGS5Ndo8kMFGlkcxJV3QW336JyeurqfzkEtVpQ6RQRADiT64Rw5G0OhbT+0cbL/ueuF/M8thT4BvNEfdxSO3qp4shBB7CHpmeGy1z1tdeojFYkJcsY9lT7XixG9LEzKiJ1m6kMx2c8cT4PDiE9CSghZ6P6ZCkMBLRONKaDj2golIny2yC4NxKKnDf175M0hzRB6FhmqBqLzypkl969Z7Ef9ImNudRVh0p8YnQ9fLVV3AqO4cFQVr09uXpgwhEXN12UF20BufkQLWU3HhJYr5pv6A9cFHhzNPDda0xQkycIeKa8gosqB59/BweeTKLpxoXRNkkMT7Au/4kKBhaOwx5DR9+cHPhlKpHxua7AdWE49QsqCXRA8o+edIVFm8moyHulvlRtzvoNXPIS9KXrebhi3Yvq1v3zx+xpdZ0ayNI4E9NFruA=
  - secure: cvQ7mH8onU2Sv4YndEsCdJBRFBhv8RYip1VL14aL31mvwqWlT8+ecLtbKahTcqHo0BKZdy2cTr3ycdrPAAFQYkbbOPTJdTK9tsB1Nn3Vj25dfPIWcgScrehQZH9WNEW/1H8pA1s16krcKiWWynB+vrPxcJDzju6rFZBDDI91eu3Sp7HcobHPSRl4qqXiOlqXOV0rQhz1IV3AM74bme1zp59TGvBNym/72s6hqv3B8qe72TcnbJtWMJgNqWbYEui6TVy8gWRtXPDPbRW/tf5Ygucsf92f/PqrXaC2CDt/bs5SFaC4/44RJ4O/iW4xyKHNsKW75/GPUmwR4j89J9aI0v5ml3HewBcCvRG4kynB+dL4RkTYmeAZ+JJz/48E2P2JzCAmVOrCTkG4T9dJGDhmfNEjpQFFkdmh6L/G/TnWbXswpqoGumkkaRUF791hT/4Z/AOZ1FhyBM0xkJdh4RRJieWHmla5SicQCAfnbfmF4EErpF+FdZnXja6fIybzX3RWDcBB4z9q1UdT7gvzaqaKLJORogL2ysP6vLTu5I0g7k4rqHaU1iAFjm2TpaAV4nZpLDIR5yA1QbdS9G9hiIxYnRqdEMfAkA55Ij9blsuwYwZN/j0A00YxxckPP2GBurEpeBYcygesPksPcBEknnYzR/zzJlvS/bAfs0mhHJo+xoA=
  - secure: FC+B8D5YaPdbf1VOEiPisyzuRnX7DDg9ewoCKFwt77U8FN/Rq0W/FJA92OkvTK+T3mZQu/YbRRPiQN177vqsSzbo/AVWkjF6vKqWfYI7nNZsX0oZxbAylRX9C5ldc+mQwxs4+T1feHBvUJggOYJZhjDDv/q+YfpMyES8byDYOS/Lf6MgzBy8LcpBLPVNLUJaXi1F5eHEnuql9x0rQTmAnjFxgBWmCLz44xJ9+Fu3/nSzCD3WxWQGsehrCB0ZZj7+od5AA6jtrD0gjElpZCAl9zF/C2BJXpnTXJ3gu5GPgn+LZ+3YOMW4Zhzq4LB5VlXUfP2mmSzjkCKv62n20Z9HB+x6p6vPIYd3o+ab1MiBJ3ZlOAnMAiij7AcqQx87RamHWW3w5e9fAoqjdKN/lj7NgxIXpOWfaGYNn1Ns2UkCCkqAZYhJ3+I7poIXnwlRbvFzoheLCO96ID05cMYGnFIhTbSpaQIaKFAPT0cgP2Q31HpZYYPjtsHyFSZznVy+NoZGZgOAb3zaLIH6SkDyrz6rMm8WZZ1OV4zm6C1qOWpuKJl9yKKb69sg8Ggf1dVQ9FfXlnxJO8dLLgpgx1DOp4iGaf+2kIDrTYqmtqsSl7auGAvz62N8qYKkMmfzEdDS4UNX/KrCku167eDr8tHTQ+tJbzg1kggYqfmuOw3Z5dJxi38=
  - secure: BEPWiDRvVYzxVBW3j4ejvsSKsCofXq4YKVpgc32Oo9tNBNzByh11eGs0DAwKH9Zfqd6Kkez2M/w071LMGfJKy7whr46z0JcC3615v/epRe4lDoXyzOfH2CXZNibWkFA3yOfRx+cvau3Uq4Z3OmL53/Qb4Y6g8RszKQDA26vLAL69MCDIpduP9PP3HVQfCZHnWMCo7uuyL5pJVigJ5I6KDnjgNyw5h82sFWqB+t+v88tlm9inCKL11i5k6kRLRvWU5SYPGLDnaObkJBvzUBqLNsUB3b9/tCuTtRuEuCVgySewdg00+M4DwUgruVWBb9/SDHYwUbfz/Ie80dXy8MWoywCznyRBlUKcTfbgNvRAnivhf7dSmF8EQMfXx2ZKA26cKFIaNpMKZNa8ArB47kW2EDu189DIF55vxXu2its6vCxW1gfFwpCt5SgALVp11TXSlJ0K/a3Wnoda+vrVGGfjlgkYVIHZ1d4vFA36ZC9c9KwtQONcYIhSe4sqLa/KmOPuFfItaka8z+lb+gPQsZRScUuorTPJgtMjfp/b8vNbQzdkcmFoeeuUje3YS/LFN59T9LlfILoz+PYsv+YKhTJ1Xgn/Offo5GB1iHy8NK3cUauSIXsqm+UKerku7p0qtpr4Q3LdnbXasLJ3bK/9zWkNTKxweDK0lcnnrMKk7vV/9KE=
